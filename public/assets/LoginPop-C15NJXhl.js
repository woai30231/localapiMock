import{k as V,d as y,T as C,r as c,U as q,f as s,i as P,o as T,w as o,a as w,e as l,u as i,j as p,E as U}from"./index-XMO9d-si.js";import{r as z}from"./request-BNalSjFW.js";const B=V({name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:10,message:"用户名长度必须在5-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为8个字符",trigger:"blur"},{pattern:/^[A-Za-z\d#]{6,}$/,message:"密码必须必须包含字母和数字，可包含#，至少8个字符",trigger:"blur"}],email:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}]}),L={style:{padding:"10px 20px"}},j=y({__name:"LoginPop",setup(N){const u=C(),g=c(),x=q(),t=c({name:"",password:""}),d=()=>{u.handle(!1)},b=()=>{g.value?.validate(async _=>{if(_){const{name:e,password:r}=t.value,a=await z.post("/token/login",{username:e,password:r});console.log("登录");const m=a.data.token;x.setToken(m),console.log(a),d()}else U.info("请检查所填信息是否有误！")})};return(_,e)=>{const r=s("el-input"),a=s("el-form-item"),m=s("el-text"),k=s("el-form"),f=s("el-button"),v=s("el-dialog");return T(),P(v,{modelValue:i(u).showPop,"onUpdate:modelValue":e[2]||(e[2]=n=>i(u).showPop=n),width:"480px",onClose:d,title:"注册"},{footer:o(()=>[w("div",null,[l(f,{onClick:d},{default:o(()=>e[4]||(e[4]=[p("取消",-1)])),_:1,__:[4]}),l(f,{onClick:b,type:"primary"},{default:o(()=>e[5]||(e[5]=[p("登录",-1)])),_:1,__:[5]})])]),default:o(()=>[w("div",L,[l(k,{ref_key:"formdataRef",ref:g,rules:i(B),model:t.value,width:"200px","label-width":"80px",size:"small"},{default:o(()=>[l(a,{prop:"name",label:"昵称"},{default:o(()=>[l(r,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.name=n)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password",label:"密码"},{default:o(()=>[l(r,{type:"password",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n)},null,8,["modelValue"])]),_:1}),l(a,{label:""},{default:o(()=>[l(m,{size:"small",style:{color:"#aaa"}},{default:o(()=>e[3]||(e[3]=[p("登录账号：user,密码：123456",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["rules","model"])])]),_:1},8,["modelValue"])}}});export{j as default};
