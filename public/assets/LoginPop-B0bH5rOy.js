import{h as k,e as y,W as C,d as c,X as q,r as s,i as P,o as z,w as o,f as w,a as l,u as i,b as p,E as B}from"./index-D-Pu53Ky.js";import{r as L}from"./request-CV6DRO4P.js";const N=k({name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:10,message:"用户名长度必须在5-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为8个字符",trigger:"blur"},{pattern:/^[A-Za-z\d#]{6,}$/,message:"密码必须必须包含字母和数字，可包含#，至少8个字符",trigger:"blur"}],email:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}]}),T={style:{padding:"10px 20px"}},A=y({__name:"LoginPop",setup(U){const u=C(),g=c(),b=q(),t=c({name:"",password:""}),d=()=>{u.handle(!1)},x=()=>{g.value?.validate(async _=>{if(_){const{name:e,password:r}=t.value,a=await L.post("/token/login",{username:e,password:r});console.log("登录");const m=a.data.token;b.setToken(m),console.log(a),d()}else B.info("请检查所填信息是否有误！")})};return(_,e)=>{const r=s("el-input"),a=s("el-form-item"),m=s("el-text"),v=s("el-form"),f=s("el-button"),V=s("el-dialog");return z(),P(V,{modelValue:i(u).showPop,"onUpdate:modelValue":e[2]||(e[2]=n=>i(u).showPop=n),width:"480px",onClose:d,title:"注册"},{footer:o(()=>[w("div",null,[l(f,{onClick:d},{default:o(()=>e[4]||(e[4]=[p("取消",-1)])),_:1,__:[4]}),l(f,{onClick:x,type:"primary"},{default:o(()=>e[5]||(e[5]=[p("登录",-1)])),_:1,__:[5]})])]),default:o(()=>[w("div",T,[l(v,{ref_key:"formdataRef",ref:g,rules:i(N),model:t.value,width:"200px","label-width":"80px",size:"small"},{default:o(()=>[l(a,{prop:"name",label:"昵称"},{default:o(()=>[l(r,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.name=n)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password",label:"密码"},{default:o(()=>[l(r,{type:"password",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n)},null,8,["modelValue"])]),_:1}),l(a,{label:""},{default:o(()=>[l(m,{size:"small",style:{color:"#aaa"}},{default:o(()=>e[3]||(e[3]=[p("测试登录账号：user,密码：user123",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["rules","model"])])]),_:1},8,["modelValue"])}}});export{A as default};
