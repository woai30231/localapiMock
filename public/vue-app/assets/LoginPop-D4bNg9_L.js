import{a as k,b as y}from"./index-DIGHUu6Q.js";import{X as C,x as q,r as c,al as s,H as z,z as P,I as o,A as x,Q as l,u as i,M as p}from"./vue-origin-C13gnj91.js";import{r as B}from"./request-DWw9KgOM.js";import{a as L}from"./element-plus-DHgJS1aZ.js";const N=C({name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:10,message:"用户名长度必须在5-10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为8个字符",trigger:"blur"},{pattern:/^[A-Za-z\d#]{6,}$/,message:"密码必须必须包含字母和数字，可包含#，至少8个字符",trigger:"blur"}],email:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}]}),T={style:{padding:"10px 20px"}},E=q({__name:"LoginPop",setup(U){const m=k(),f=c(),b=y(),t=c({name:"",password:""}),u=()=>{m.handle(!1)},w=()=>{f.value?.validate(async g=>{if(g){const{name:e,password:r}=t.value,a=await B.post("/token/login",{username:e,password:r});console.log("登录");const d=a.data.token;b.setToken(d),console.log(a),u()}else L.info("请检查所填信息是否有误！")})};return(g,e)=>{const r=s("el-input"),a=s("el-form-item"),d=s("el-text"),v=s("el-form"),_=s("el-button"),V=s("el-dialog");return P(),z(V,{modelValue:i(m).showPop,"onUpdate:modelValue":e[2]||(e[2]=n=>i(m).showPop=n),width:"480px",onClose:u,title:"注册"},{footer:o(()=>[x("div",null,[l(_,{onClick:u},{default:o(()=>[...e[4]||(e[4]=[p("取消",-1)])]),_:1}),l(_,{onClick:w,type:"primary"},{default:o(()=>[...e[5]||(e[5]=[p("登录",-1)])]),_:1})])]),default:o(()=>[x("div",T,[l(v,{ref_key:"formdataRef",ref:f,rules:i(N),model:t.value,width:"200px","label-width":"80px",size:"small"},{default:o(()=>[l(a,{prop:"name",label:"昵称"},{default:o(()=>[l(r,{modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.name=n)},null,8,["modelValue"])]),_:1}),l(a,{prop:"password",label:"密码"},{default:o(()=>[l(r,{type:"password",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n)},null,8,["modelValue"])]),_:1}),l(a,{label:""},{default:o(()=>[l(d,{size:"small",style:{color:"#aaa"}},{default:o(()=>[...e[3]||(e[3]=[p("测试登录账号：user,密码：user123",-1)])]),_:1})]),_:1})]),_:1},8,["rules","model"])])]),_:1},8,["modelValue"])}}});export{E as default};
