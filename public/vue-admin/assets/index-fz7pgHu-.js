import{ah as te,d as W,an as T,ao as J,P as ne,ap as re,aq as ye,ar as be,Z as q,C as L,as as G,at as Se,M as Z,s as F,t as ge,z as U,c as k,u as s,o as c,b as a,U as B,au as K,a0 as z,a as f,av as he,B as _e,W as we,y as P,a1 as M,J as S,I as O,e as g,a4 as x,F as ie,a6 as oe,a7 as ae,aw as pe,D as Y,ag as ue,ax as Ne,x as H,A as Ce,Q as Ee,a3 as se,w as m,a2 as $e,f as Q,ay as ke,az as De,_ as Ie}from"./index-CqqFsW9D.js";import{E as Pe}from"./el-card-C91u8YpN.js";import{E as We}from"./el-tag-DunVGVMk.js";import{E as ze}from"./el-divider-B-olAjCE.js";import{C as de}from"./event-BB_Ol6Sd.js";const Be=(E,e,t)=>re(E.subTree).filter(n=>{var i;return ye(n)&&((i=n.type)==null?void 0:i.name)===e&&!!n.component}).map(n=>n.component.uid).map(n=>t[n]).filter(n=>!!n),Ve=(E,e)=>{const t=te({}),d=te([]),o=new WeakMap,n=p=>{t.value[p.uid]=p,J(t),ne(()=>{const u=p.getVnode().el,v=u.parentNode;if(!o.has(v)){o.set(v,[]);const b=v.insertBefore.bind(v);v.insertBefore=(h,_)=>(o.get(v).some(w=>h===w||_===w)&&J(t),b(h,_))}o.get(v).push(u)})},i=p=>{delete t.value[p.uid],J(t);const u=p.getVnode().el,v=u.parentNode,b=o.get(v),h=b.indexOf(u);b.splice(h,1)},D=()=>{d.value=Be(E,e,t.value)},l=p=>p.render(),y=W({setup(p,{slots:u}){return()=>(D(),u.default?T(l,{render:u.default}):null)}});return{children:d,addChild:n,removeChild:i,ChildrenSorter:y}},X=Symbol("elDescriptions");var R=W({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Z(X,{})}},render(){var E;const e=be(this.cell),t=(((E=this.cell)==null?void 0:E.dirs)||[]).map(w=>{const{dir:N,arg:C,modifiers:V,value:I}=w;return[N,I,C,V]}),{border:d,direction:o}=this.descriptions,n=o==="vertical",i=()=>{var w,N,C;return((C=(N=(w=this.cell)==null?void 0:w.children)==null?void 0:N.label)==null?void 0:C.call(N))||e.label},D=()=>{var w,N,C;return(C=(N=(w=this.cell)==null?void 0:w.children)==null?void 0:N.default)==null?void 0:C.call(N)},l=e.span,y=e.rowspan,p=e.align?`is-${e.align}`:"",u=e.labelAlign?`is-${e.labelAlign}`:p,v=e.className,b=e.labelClassName,h=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,_={width:q(h),minWidth:q(e.minWidth)},$=L("descriptions");switch(this.type){case"label":return G(T(this.tag,{style:_,class:[$.e("cell"),$.e("label"),$.is("bordered-label",d),$.is("vertical-label",n),u,b],colSpan:n?l:1,rowspan:n?1:y},i()),t);case"content":return G(T(this.tag,{style:_,class:[$.e("cell"),$.e("content"),$.is("bordered-content",d),$.is("vertical-content",n),p,v],colSpan:n?l:l*2-1,rowspan:n?y*2-1:y},D()),t);default:{const w=i(),N={},C=q(e.labelWidth||this.descriptions.labelWidth);return C&&(N.width=C,N.display="inline-block"),G(T("td",{style:_,class:[$.e("cell"),p],colSpan:l,rowspan:y},[Se(w)?void 0:T("span",{style:N,class:[$.e("label"),b]},w),T("span",{class:[$.e("content"),v]},D())]),t)}}}});const Ae=F({row:{type:ge(Array),default:()=>[]}}),Te=W({name:"ElDescriptionsRow"}),Oe=W({...Te,props:Ae,setup(E){const e=Z(X,{});return(t,d)=>s(e).direction==="vertical"?(c(),k(B,{key:0},[a("tr",null,[(c(!0),k(B,null,K(t.row,(o,n)=>(c(),z(s(R),{key:`tr1-${n}`,cell:o,tag:"th",type:"label"},null,8,["cell"]))),128))]),a("tr",null,[(c(!0),k(B,null,K(t.row,(o,n)=>(c(),z(s(R),{key:`tr2-${n}`,cell:o,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(c(),k("tr",{key:1},[(c(!0),k(B,null,K(t.row,(o,n)=>(c(),k(B,{key:`tr3-${n}`},[s(e).border?(c(),k(B,{key:0},[f(s(R),{cell:o,tag:"td",type:"label"},null,8,["cell"]),f(s(R),{cell:o,tag:"td",type:"content"},null,8,["cell"])],64)):(c(),z(s(R),{key:1,cell:o,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Re=U(Oe,[["__file","descriptions-row.vue"]]);const Me=F({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:he,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),ce="ElDescriptionsItem",xe=W({name:"ElDescriptions"}),Fe=W({...xe,props:Me,setup(E){const e=E,t=L("descriptions"),d=_e(),o=we();ie(X,e);const n=P(()=>[t.b(),t.m(d.value)]),i=(l,y,p,u=!1)=>(l.props||(l.props={}),y>p&&(l.props.span=p),u&&(l.props.span=y),l),D=()=>{if(!o.default)return[];const l=re(o.default()).filter(h=>{var _;return((_=h?.type)==null?void 0:_.name)===ce}),y=[];let p=[],u=e.column,v=0;const b=[];return l.forEach((h,_)=>{var $,w,N;const C=(($=h.props)==null?void 0:$.span)||1,V=((w=h.props)==null?void 0:w.rowspan)||1,I=y.length;if(b[I]||(b[I]=0),V>1)for(let r=1;r<V;r++)b[N=I+r]||(b[N]=0),b[I+r]++,v++;if(b[I]>0&&(u-=b[I],b[I]=0),_<l.length-1&&(v+=C>u?u:C),_===l.length-1){const r=e.column-v%e.column;p.push(i(h,r,u,!0)),y.push(p);return}C<u?(u-=C,p.push(h)):(p.push(i(h,C,u)),y.push(p),u=e.column,p=[])}),y};return(l,y)=>(c(),k("div",{class:S(s(n))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(c(),k("div",{key:0,class:S(s(t).e("header"))},[a("div",{class:S(s(t).e("title"))},[O(l.$slots,"title",{},()=>[g(x(l.title),1)])],2),a("div",{class:S(s(t).e("extra"))},[O(l.$slots,"extra",{},()=>[g(x(l.extra),1)])],2)],2)):M("v-if",!0),a("div",{class:S(s(t).e("body"))},[a("table",{class:S([s(t).e("table"),s(t).is("bordered",l.border)])},[a("tbody",null,[(c(!0),k(B,null,K(D(),(p,u)=>(c(),z(Re,{key:u,row:p},null,8,["row"]))),128))])],2)],2)],2))}});var Ke=U(Fe,[["__file","description.vue"]]);const le=["left","center","right"],Le=F({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,values:le,default:"left"},labelAlign:{type:String,values:le},className:{type:String,default:""},labelClassName:{type:String,default:""}}),ve=W({name:ce,props:Le}),Ue=oe(Ke,{DescriptionsItem:ve}),je=ae(ve),Je=F({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),qe={[de]:(E,e)=>[E,e].every(pe)},fe="ElSteps",Ge=W({name:"ElSteps"}),He=W({...Ge,props:Je,emits:qe,setup(E,{emit:e}){const t=E,d=L("steps"),{children:o,addChild:n,removeChild:i,ChildrenSorter:D}=Ve(ue(),"ElStep");return Y(o,()=>{o.value.forEach((l,y)=>{l.setIndex(y)})}),ie(fe,{props:t,steps:o,addStep:n,removeStep:i}),Y(()=>t.active,(l,y)=>{e(de,l,y)}),(l,y)=>(c(),k("div",{class:S([s(d).b(),s(d).m(l.simple?"simple":l.direction)])},[O(l.$slots,"default"),f(s(D))],2))}});var Qe=U(He,[["__file","steps.vue"]]);const Ye=F({title:{type:String,default:""},icon:{type:Ne},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Ze=W({name:"ElStep"}),Xe=W({...Ze,props:Ye,setup(E){const e=E,t=L("step"),d=H(-1),o=H({}),n=H(""),i=Z(fe),D=ue();ne(()=>{Y([()=>i.props.active,()=>i.props.processStatus,()=>i.props.finishStatus],([r])=>{V(r)},{immediate:!0})});const l=P(()=>e.status||n.value),y=P(()=>{const r=i.steps.value[d.value-1];return r?r.currentStatus:"wait"}),p=P(()=>i.props.alignCenter),u=P(()=>i.props.direction==="vertical"),v=P(()=>i.props.simple),b=P(()=>i.steps.value.length),h=P(()=>{var r;return((r=i.steps.value[b.value-1])==null?void 0:r.uid)===D.uid}),_=P(()=>v.value?"":i.props.space),$=P(()=>[t.b(),t.is(v.value?"simple":i.props.direction),t.is("flex",h.value&&!_.value&&!p.value),t.is("center",p.value&&!u.value&&!v.value)]),w=P(()=>{const r={flexBasis:pe(_.value)?`${_.value}px`:_.value?_.value:`${100/(b.value-(p.value?0:1))}%`};return u.value||h.value&&(r.maxWidth=`${100/b.value}%`),r}),N=r=>{d.value=r},C=r=>{const A=r==="wait",j={transitionDelay:`${A?"-":""}${150*d.value}ms`},ee=r===i.props.processStatus||A?0:100;j.borderWidth=ee&&!v.value?"1px":0,j[i.props.direction==="vertical"?"height":"width"]=`${ee}%`,o.value=j},V=r=>{r>d.value?n.value=i.props.finishStatus:r===d.value&&y.value!=="error"?n.value=i.props.processStatus:n.value="wait";const A=i.steps.value[d.value-1];A&&A.calcProgress(n.value)},I=Ce({uid:D.uid,getVnode:()=>D.vnode,currentStatus:l,setIndex:N,calcProgress:C});return i.addStep(I),Ee(()=>{i.removeStep(I)}),(r,A)=>(c(),k("div",{style:se(s(w)),class:S(s($))},[M(" icon & line "),a("div",{class:S([s(t).e("head"),s(t).is(s(l))])},[s(v)?M("v-if",!0):(c(),k("div",{key:0,class:S(s(t).e("line"))},[a("i",{class:S(s(t).e("line-inner")),style:se(o.value)},null,6)],2)),a("div",{class:S([s(t).e("icon"),s(t).is(r.icon||r.$slots.icon?"icon":"text")])},[O(r.$slots,"icon",{},()=>[r.icon?(c(),z(s(Q),{key:0,class:S(s(t).e("icon-inner"))},{default:m(()=>[(c(),z($e(r.icon)))]),_:1},8,["class"])):s(l)==="success"?(c(),z(s(Q),{key:1,class:S([s(t).e("icon-inner"),s(t).is("status")])},{default:m(()=>[f(s(ke))]),_:1},8,["class"])):s(l)==="error"?(c(),z(s(Q),{key:2,class:S([s(t).e("icon-inner"),s(t).is("status")])},{default:m(()=>[f(s(De))]),_:1},8,["class"])):s(v)?M("v-if",!0):(c(),k("div",{key:3,class:S(s(t).e("icon-inner"))},x(d.value+1),3))])],2)],2),M(" title & description "),a("div",{class:S(s(t).e("main"))},[a("div",{class:S([s(t).e("title"),s(t).is(s(l))])},[O(r.$slots,"title",{},()=>[g(x(r.title),1)])],2),s(v)?(c(),k("div",{key:0,class:S(s(t).e("arrow"))},null,2)):(c(),k("div",{key:1,class:S([s(t).e("description"),s(t).is(s(l))])},[O(r.$slots,"description",{},()=>[g(x(r.description),1)])],2))],2)],6))}});var me=U(Xe,[["__file","item.vue"]]);const et=oe(Qe,{Step:me}),tt=ae(me),st={},lt={class:"permission-system-container"},nt={class:"content-section"},rt={class:"process-steps"},it={class:"step-detail"},ot={class:"step-detail"},at={class:"step-detail"},pt={class:"tech-details"};function ut(E,e){const t=ze,d=tt,o=We,n=et,i=je,D=Ue,l=Pe;return c(),k("div",lt,[f(l,{class:"system-card"},{header:m(()=>[...e[0]||(e[0]=[a("div",{class:"card-header"},[a("h2",null,"基于Vue3+Element-Plus的权限管理系统")],-1)])]),default:m(()=>[a("div",nt,[f(t,{"content-position":"left"},{default:m(()=>[...e[1]||(e[1]=[a("h3",null,"系统概述",-1)])]),_:1}),e[26]||(e[26]=a("p",{class:"content-text"}," 当前系统是基于vue3+vue-router实现权限控制的一个后台管理系统 ",-1)),f(t,{"content-position":"left"},{default:m(()=>[...e[2]||(e[2]=[a("h3",null,"权限控制流程",-1)])]),_:1}),a("div",rt,[f(n,{direction:"vertical",active:4},{default:m(()=>[f(d,{title:"账号登录"},{description:m(()=>[...e[3]||(e[3]=[a("p",{class:"step-desc"},"用户使用账号登录服务器",-1)])]),_:1}),f(d,{title:"权限获取"},{description:m(()=>[e[9]||(e[9]=a("p",{class:"step-desc"},"服务器返回账号的角色字段和权限字段",-1)),a("div",it,[f(o,{type:"success"},{default:m(()=>[...e[4]||(e[4]=[g("角色字段",-1)])]),_:1}),e[6]||(e[6]=g(" 控制页面路由访问权限 ",-1)),e[7]||(e[7]=a("br",null,null,-1)),f(o,{type:"warning"},{default:m(()=>[...e[5]||(e[5]=[g("权限字段",-1)])]),_:1}),e[8]||(e[8]=g(" 控制页面功能/按钮权限 ",-1))])]),_:1}),f(d,{title:"路由分类"},{description:m(()=>[e[15]||(e[15]=a("p",{class:"step-desc"},"前端将路由分为两类：",-1)),a("div",ot,[f(o,null,{default:m(()=>[...e[10]||(e[10]=[g("公共路由",-1)])]),_:1}),e[12]||(e[12]=g(" 所有人都能访问的路由 ",-1)),e[13]||(e[13]=a("br",null,null,-1)),f(o,{type:"danger"},{default:m(()=>[...e[11]||(e[11]=[g("受限路由",-1)])]),_:1}),e[14]||(e[14]=g(" 需要权限才能访问的路由 ",-1))])]),_:1}),f(d,{title:"受限路由实现"},{description:m(()=>[e[21]||(e[21]=a("p",{class:"step-desc"},"受限路由分为两种实现方式：",-1)),a("div",at,[f(o,{type:"info"},{default:m(()=>[...e[16]||(e[16]=[g("动态受限路由",-1)])]),_:1}),e[18]||(e[18]=g(" 根据账号权限动态添加 ",-1)),e[19]||(e[19]=a("br",null,null,-1)),f(o,{type:"primary"},{default:m(()=>[...e[17]||(e[17]=[g("静态受限路由",-1)])]),_:1}),e[20]||(e[20]=g(" 通过meta配置角色权限 ",-1))])]),_:1})]),_:1})]),f(t,{"content-position":"left"},{default:m(()=>[...e[22]||(e[22]=[a("h3",null,"技术实现细节",-1)])]),_:1}),a("div",pt,[f(D,{column:1,border:""},{default:m(()=>[f(i,{label:"动态路由"},{default:m(()=>[...e[23]||(e[23]=[g(" 账号登录后根据权限动态添加到路由列表，切换账号会更新 ",-1)])]),_:1}),f(i,{label:"静态路由"},{default:m(()=>[...e[24]||(e[24]=[g(" App初始分配的路由，通过meta配置访问角色，在router.beforeEach中校验权限 ",-1)])]),_:1}),f(i,{label:"权限控制"},{default:m(()=>[...e[25]||(e[25]=[g(" 结合角色和权限字段实现细粒度的页面和功能控制 ",-1)])]),_:1})]),_:1})])])]),_:1})])}const yt=Ie(st,[["render",ut],["__scopeId","data-v-ced4c48e"]]);export{yt as default};
